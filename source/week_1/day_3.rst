.. _week-1-day-3:

======
第三日
======

.. num-section::

.. _comment:

コメント
--------

LilyPondのソースファイルには、出力結果に全く関与しないコメントを挿入することができる。

単一行コメントは、 ``%`` で始まり、行末までがコメントとなる。

.. lily::
  :caption: 単一行コメント
  :name: single-line-comment
  :without-image:

  {
    c4 d e f % これがコメント
  }

複数行コメントは、 ``%{`` ``%}`` で囲まれた範囲が対象となる。

.. lily::
  :caption: 複数行コメント
  :name: multi-line-comment
  :without-image:

  {
    c4 d e f
    %{
      これが複数行コメント。
      長いコメントを書くことができる。
    %}
  }

複数行コメントは入れ子構造にすることはできず、最初に出現した ``%}`` でコメントは終了する。

:ref:`scheme-syntax` で扱うが、Schemeコード中でのコメントはこれと異なり、単一行が ``'`` 、複数行が ``#!`` ``!#`` である。


.. num-section::

.. _chord:

和音
----

和音を入力するには、 ``<`` と ``>`` の中に音高を入力し、外に音長を記述する。

.. lily::
  :caption: 和音
  :name: chord-example

  {
    <c' e'>4 <e' c''> <c'' e'' g''>2
  }

相対オクターブ入力における音高は、和音中においては1つ前にある音高を基準にし、和音外の他の音とは和音の最初に出現する音高が基準となる。

.. lily::
  :caption: 相対オクターブ入力における和音
  :name: chord-in-relative-octave

  \relative c' {
    e4 <g c e g> d <e a, g' c>
  }

1つ目の和音 ``<g c e g>`` においては、 最初の ``g`` はその前の音 ``e`` を基準にしており、
それぞれ ``c`` は ``g`` 、``e`` は ``c`` 、 ``g`` は ``e`` を基準にしている。
次の音 ``d`` は、前の音が和音であるから、和音の最初の音 ``g`` が基準となる。
最後の和音では、 ``e`` は ``d`` が基準であり、続く音は音の高低の順番にかかわらず、和音中の1つ前の音が基準となっていることを確認せよ。


.. num-section::

.. _chord-repeat:

和音の繰り返し (1)
------------------

同じ和音を繰り返すには、音名の代わりに ``q`` を入力する。オクターブ記号は許容されない。
``q`` は、間に単音や休符が存在しても、必ず最後に出現した和音と同じ音高の和音を生成する。

.. lily::
  :caption: 和音の繰り返し
  :name: chord-repeat-example

  \relative c' {
    <c e g>2 q4 <c f a>8 r f'2 q
  }

音楽の最初で ``q`` を用いるとエラーとなる。


.. num-section::

.. _single-note-or-chord-repeat:

単音か和音の繰り返し
--------------------

音高を省略し音長のみを指定すると、最後に出現した単音あるいは和音と同じ音高が繰り返される。
休符は繰り返されない。

.. lily::
  :caption: 単音か和音の繰り返し
  :name: single-note-or-chord-repeat-example

  \relative c' {
    <c e g>2 4 <c f a>8 r f'2 2
  }

:ref:`chord-repeat` の例と比較せよ。

音楽の最初で音高を省略すると ``c'`` が出力される。


.. num-section::

.. _tie-and-slur:

タイとスラー
------------

タイを描くには、タイを繋げる2つの音符のうち、最初の音符に ``~`` を付加する。

.. lily::
  :caption: タイ
  :name: tie-example

  \relative c' {
    c2~ c8 g'4 f8~ 8. e16~ 8 d8 c2
  }

和音にタイを付加する際、和音内の各音にタイ記号を付加することで繋ぐ音符を指定できるし、
``<`` ``>`` の外側に付加すれば可能な音全てがタイで繋がる。

.. lily::
  :caption: 和音のタイ
  :name: chord-tie-example

  \relative c' {
    <c e~ g>2 q <c f a>~ <c e g>
  }

タイ記号は音符の後にスペースを開けて ``c ~ c`` のようにも書くことができるが、この場合でも ``~`` は前者の音符と後者の音符を繋ぐ役割を果たしているわけではない。
``~`` はあくまでも前者の音符に属しており、「次の同じ音高の音符とタイを繋げよ」という情報に過ぎないのである。

スラーを描くには、最初の音符に ``(`` を付加し、最後の音符に ``)`` を付加する。

.. lily::
  :caption: スラー
  :name: slur-example

  \relative c' {
    c4( d e f)
  }

注意を要するのが、 ``(c4 d e f)`` のように括弧で音符を囲うようにしてはいけないということである。
スラーもタイのように「始まり」と「終わり」の情報を音符に付加しているだけであるということに留意せよ。


.. num-section::

.. _beam:

連桁
----


.. num-section::

.. _tuplet:

連符
----


.. num-section::

.. _barline-and-bar-check:

小節線と小節チェック
--------------------

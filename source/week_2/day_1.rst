======
第一日
======

.. num-section::

.. _context:

コンテキスト
------------

LilyPondの更なる利用のために、ここでコンテキストという概念について理解しておく必要がある。

LilyPondの楽譜表現は階層構造になっており、あるコンテキストが別のコンテキストを含むという形をとっている。
代表的なコンテキストは ``Score`` 、 ``Staff`` 、 ``Voice`` の3つであり、それぞれが出力される楽譜の「楽譜全体」、「譜（1パート分の五線譜）」「声部」に対応している。
``Score`` は1つまたは複数の ``Staff`` を含むことができ、 ``Staff`` は1つまたは複数の ``Voice`` を含むことができる。
以下の図は、コンテキストの階層構造を図示したものである。

TODO

コンテキストは :ref:`engraver` で扱うエングラーバというものをいくつか持ち、それぞれのエングラーバが実際に音楽記号を配置する。
例えば、 ``Voice`` コンテキストは ``Note_heads_engraver`` と呼ばれるエングラーバを持ち、このエングラーバは符頭を楽譜上に描く。
``Score`` コンテキストは ``Metronome_mark_engraver`` というエングラーバを持ち、楽譜全体で共有されるテンポ記号を描く。


.. num-section::

.. _creating-context:

コンテキストの生成
------------------

コンテキストは ``\new`` コマンドで生成する。続いて、生成するコンテキストの種類を入力し、必要であればコンテキストの固有名を ``=`` と文字列で指定する。
最後に音楽表記を与える。

.. lily::
  :caption: コンテキストの生成
  :name: creating-context-example

  \new Staff {
    \new Voice = "myvoice" {
      c4
    }
  }
